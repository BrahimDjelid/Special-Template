const settingsIcon=document.querySelector(".toggle-button .settings-button");const toggleButton=document.querySelector(".toggle-button");const settingsBox=document.querySelector(".settings-box");const colorsLi=document.querySelectorAll(".colors-list li");const landingPage=document.querySelector(".landing-page");const randomBgButtons=document.querySelectorAll(".options-box .random-bg-button",);let bulletsButtons=document.querySelectorAll(".bullets-button");let bulletsContainer=document.querySelector(".nav-bullets");let randomBackgroundOption=!0;let backgroundInterval;let currentImageIndex=0;let feedbackTimeout;let feedbackTimeoutIcon;const imgs=["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","7.jpg","8.jpg","9.jpg","10.jpg",];let ourSkills=document.querySelector(".skills");let ourGallery=document.querySelectorAll(".gallery img");function handleGlassMode(){const landingBottom=landingPage.offsetTop+landingPage.offsetHeight;const scrollY=window.pageYOffset;if(scrollY<landingBottom-155){document.body.classList.add("landing-mode");document.body.classList.remove("content-mode")}else{document.body.classList.add("content-mode");document.body.classList.remove("landing-mode")}}
window.addEventListener("scroll",handleGlassMode);window.addEventListener("load",handleGlassMode);function handleActive(event){event.target.parentElement.querySelectorAll(".active").forEach((element)=>{element.classList.remove("active")});event.target.classList.add("active")}
function toggleSettings(){settingsBox.classList.toggle("active");settingsIcon.classList.toggle("fa-spin")}
toggleButton.addEventListener("click",toggleSettings);document.addEventListener("click",(e)=>{if(!toggleButton.contains(e.target)&&!settingsBox.contains(e.target)){settingsBox.classList.remove("active");settingsIcon.classList.remove("fa-spin")}});function hexToRgb(hex){return hex.replace("#","").match(/.{2}/g).map((x)=>parseInt(x,16)).join(", ")}
function updateThemeColor(color){const rgb=hexToRgb(color);document.documentElement.style.setProperty("--primary",color);document.documentElement.style.setProperty("--primary-rgb",rgb);localStorage.setItem("primary",color);localStorage.setItem("primary-rgb",rgb)}
function handleColorChange(event){handleActive(event);const color=event.target.dataset.color;updateThemeColor(color);toggleSettings()}
colorsLi.forEach((li)=>{li.addEventListener("click",handleColorChange)});function randomBackgrounds(){clearInterval(backgroundInterval);if(randomBackgroundOption===!0){backgroundInterval=setInterval(()=>{currentImageIndex=Math.floor(Math.random()*imgs.length);landingPage.style.backgroundImage=`url("imgs/${imgs[currentImageIndex]}")`;localStorage.setItem("backgroundImageIndex",currentImageIndex)},10000)}else{clearInterval(backgroundInterval)}}
function showFeedback(message,iconClass,type){let feedback=document.querySelector(".feedback");let feedbackIcon=document.querySelector(".feedback-icon");let feedbackMsg=document.querySelector(".feedback-text");feedbackMsg.textContent=message;feedbackIcon.innerHTML=`<i class="${iconClass}"></i>`;feedback.classList.remove("show","success","info");setTimeout(()=>{feedback.classList.add("show",type)},10);clearTimeout(feedbackTimeout);clearTimeout(feedbackTimeoutIcon);feedbackTimeout=setTimeout(()=>{feedback.classList.remove("show");feedbackTimeoutIcon=setTimeout(()=>{feedback.classList.remove("success","info")},4000)},3000)}
function handleBackgroundToggle(event){handleActive(event);if(event.target.dataset.background==="yes"){randomBackgroundOption=!0;localStorage.setItem("randomBgOption",!0);randomBackgrounds();showFeedback("Random Background Active!","fa-regular fa-circle-check","success",)}else{randomBackgroundOption=!1;localStorage.setItem("randomBgOption",!1);localStorage.setItem("backgroundImageIndex",currentImageIndex);clearInterval(backgroundInterval);showFeedback("Background Locked!","fa-regular fa-circle-xmark","info")}
toggleSettings()}
randomBgButtons.forEach((button)=>{button.addEventListener("click",handleBackgroundToggle)});bulletsButtons.forEach((button)=>{button.addEventListener("click",(event)=>{if(event.target.dataset.display==="show"){bulletsContainer.style.display="block";localStorage.setItem("bullets","show");showFeedback("Bullets Option Active!","fa-regular fa-circle-check","success",)}else{bulletsContainer.style.display="none";localStorage.setItem("bullets","hide");showFeedback("Bullets Are Hidden!","fa-regular fa-circle-xmark","info")}
handleActive(event);toggleSettings()})});function loadSavedColor(){const savedColor=localStorage.getItem("primary");const savedRgb=localStorage.getItem("primary-rgb");if(savedColor&&savedRgb){document.documentElement.style.setProperty("--primary",savedColor);document.documentElement.style.setProperty("--primary-rgb",savedRgb);colorsLi.forEach((li)=>{li.classList.remove("active");if(li.dataset.color===savedColor){li.classList.add("active")}})}}
function loadSavedBackgroundImage(){const savedIndex=localStorage.getItem("backgroundImageIndex");if(savedIndex!==null){currentImageIndex=parseInt(savedIndex);landingPage.style.backgroundImage=`url("imgs/${imgs[currentImageIndex]}")`}else{currentImageIndex=0;landingPage.style.backgroundImage=`url("imgs/1.jpg")`}}
function loadSavedBackgroundOption(){const randomBgValue=localStorage.getItem("randomBgOption");if(randomBgValue!==null){randomBgButtons.forEach((button)=>{button.classList.remove("active")});if(randomBgValue==="true"){randomBackgroundOption=!0;document.querySelector(".random-bg-button.yes").classList.add("active")}else{randomBackgroundOption=!1;document.querySelector(".random-bg-button.no").classList.add("active")}}}
function loadBulletsState(){const state=localStorage.getItem("bullets");if(state){if(state==="show"){bulletsContainer.style.display="block"}else{bulletsContainer.style.display="none"}
bulletsButtons.forEach((button)=>{button.classList.remove("active");if(button.dataset.display===state){button.classList.add("active")}})}}
loadSavedColor();loadSavedBackgroundImage();loadSavedBackgroundOption();loadBulletsState();if(randomBackgroundOption===!0){randomBackgrounds()}
const localStorageItems=["primary","primary-rgb","randomBgOption","backgroundImageIndex","bullets",];document.querySelector(".reset-button").onclick=function(){localStorageItems.forEach((item)=>{localStorage.removeItem(item)});window.location.reload()};window.onscroll=function(){let skillsOffsetTop=ourSkills.offsetTop;let skillsOuterHeight=ourSkills.offsetHeight;let windowHeight=this.innerHeight;let windowScrollTop=this.pageYOffset;if(windowScrollTop>skillsOffsetTop+skillsOuterHeight-windowHeight){let allSkills=this.document.querySelectorAll(".skill-box .skill-progress span",);allSkills.forEach((skill)=>{skill.style.width=skill.dataset.progress})}};ourGallery.forEach((img)=>{img.addEventListener("click",()=>{let overlay=document.createElement("div");overlay.className="popup-overlay";document.body.appendChild(overlay);let popupBox=document.createElement("div");popupBox.className="popup-box";if(img.alt!==null&&img.alt!==""){let imageHeading=document.createElement("h3");let headingText=document.createTextNode(img.alt);imageHeading.appendChild(headingText);popupBox.appendChild(imageHeading)}
let popupImage=document.createElement("img");popupImage.src=img.src;popupBox.appendChild(popupImage);document.body.appendChild(popupBox);let closeButton=document.createElement("span");closeButton.innerHTML=`<i class="fa-solid fa-xmark"></i>`;closeButton.className="close-button";popupBox.appendChild(closeButton)})});document.addEventListener("click",(event)=>{if(event.target.className=="close-button"){event.target.parentNode.remove();document.querySelector(".popup-overlay").remove()}else if(event.target.classList.contains("fa-xmark")){event.target.parentNode.parentNode.remove();document.querySelector(".popup-overlay").remove()}});const bullets=document.querySelectorAll(".nav-bullets .bullet");const links=document.querySelectorAll(".links a");function scrollToSection(elements){elements.forEach((element)=>{element.addEventListener("click",(event)=>{event.preventDefault();document.querySelector(event.target.dataset.section).scrollIntoView({behavior:"smooth",})})})}
scrollToSection(bullets);scrollToSection(links);let toggleMenu=document.querySelector(".toggle-menu");let linksOpened=document.querySelector(".links");toggleMenu.addEventListener("click",()=>{linksOpened.classList.toggle("open")});document.addEventListener("click",(e)=>{if(!toggleMenu.contains(e.target)&&!linksOpened.contains(e.target)){linksOpened.classList.remove("open")}})